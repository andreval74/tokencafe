<!doctype html>
<html lang="pt-BR">

<head>
  <title>Detalhes do Contrato - TokenCafe</title>
  <meta name="description" content="Detalhes, verificação e download do contrato criado" />
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="author" content="TokenCafe Team" />

  <!-- Favicons TokenCafe -->
  <link rel="icon" type="image/png" sizes="16x16" href="../../../imgs/tkncafe16x16.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="../../../imgs/tkncafe32x32.png" />
  <link rel="icon" type="image/png" sizes="192x192" href="../../../imgs/tkncafe192x192.png" />

  <!-- Fonts + Bootstrap + Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
    rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/brands.min.css" rel="stylesheet" />

  <!-- TokenCafe CSS Unificado -->
  <link href="../../../css/styles.css" rel="stylesheet" />
</head>

<body class="bg-page-black">
  <!-- Header unificado -->
  <div data-component="tools-header.html" data-header-mode="app" data-icon="fa-wand-magic-sparkles"
    data-icon-alt="Construtor" data-title="Detalhes do Contrato" data-subtitle="Informações e Gerenciamento"></div>

  <div class="container">

    <div class="g-4">
      <div class="col-12">

        <div id="status-alert" class="alert d-none mb-4" role="alert"></div>

        <!-- Busca pelo Contrato (Detalhes) -->
        <div id="contract-search-container" class="mb-3">
          <div data-component="components/contract-search.html"></div>
        </div>

        <!-- Download de Arquivos e Compartilhamento (Via Componente) -->
        <div data-component="shared/components/contract-actions.html"></div>


        <!-- Ação de Deploy -->
        <div class="mb-4" id="actions-section">
          <div class="d-flex gap-2 justify-content-end align-items-center">
            <!-- Botão Verificar Manualmente (inicialmente oculto ou visível conforme estado) -->
            <button id="btnManualVerify" class="btn btn-warning btn-lg px-4 d-none"
              title="Forçar verificação do contrato na blockchain">
              <i class="bi bi-shield-check me-2"></i> VERIFICAR CONTRATO
            </button>

            <!-- Botão Novo Contrato -->
            <a href="contrato-index.html" id="btnNewContract" class="btn btn-outline-secondary btn-lg px-5"
              title="Criar um novo contrato">
              <i class="bi bi-plus-lg me-2"></i> NOVO CONTRATO
            </a>

            <!-- Botão Home -->
            <a href="../../tools.html" class="btn btn-outline-success btn-lg px-4" title="Ir para a Página Inicial">
              <i class="bi bi-house-door me-2"></i> HOME
            </a>
          </div>
        </div>
      </div>

    </div>

  </div>

  <div data-component="footer.html"></div>

  <!-- Modal de Visualização de Arquivos -->
  <div class="modal fade" id="fileViewerModal" tabindex="-1" aria-labelledby="fileViewerModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
      <div class="modal-content bg-dark border-secondary text-light">
        <div class="modal-header border-secondary">
          <h5 class="modal-title" id="fileViewerModalLabel">Visualizar Arquivo</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <textarea id="fileViewerContent" class="form-control bg-black text-success border-secondary font-monospace"
            rows="15" readonly></textarea>
        </div>
        <div class="modal-footer border-secondary">
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Fechar</button>
          <button type="button" class="btn btn-outline-light" id="btnModalCopy">
            <i class="bi bi-clipboard me-1"></i> Copiar
          </button>
          <button type="button" class="btn btn-primary" id="btnModalDownload">
            <i class="bi bi-download me-1"></i> Download
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap Bundle (JS + Popper) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Ethers.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>

  <!-- Configuração do endpoint da API -->
  <script src="../../../js/shared/api-config.js?v=1.1"></script>

  <!-- System Base (Carrega componentes e utilitários) -->
  <script type="module" src="../../../js/shared/base-system.js"></script>
  <!-- Main Logic -->
  <script type="module" src="../../../js/modules/contrato/contrato-detalhes.js"></script>
</body>

</html>