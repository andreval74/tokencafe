<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <title>Mini Widget Demo • TokenCafe</title>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Demonstração do Mini Widget de venda de tokens" />
  <meta name="author" content="TokenCafe Team" />

  <!-- Favicons TokenCafe -->
  <link rel="icon" type="image/png" sizes="16x16" href="../../../imgs/tkncafe16x16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="../../../imgs/tkncafe32x32.png">
  <link rel="icon" type="image/png" sizes="192x192" href="../../../imgs/tkncafe192x192.png">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

  <!-- TokenCafe CSS Unificado -->
  <link href="../../../css/styles.css" rel="stylesheet">
</head>
<body class="bg-page-black">
  <!-- Header padrão inspirado em https://xcafe.app/widget-bkp/#demo -->
  <div data-component="tools-header.html"
       data-icon="fa-rocket"
       data-icon-alt="Widget Demo"
       data-title="Mini Widget Demo"
       data-subtitle="Experimente o widget com sua carteira">
  </div>

  <div class="container-fluid py-3">
    <div class="row justify-content-center g-3">
      <!-- Lado esquerdo: Widget -->
      <div class="col-lg-6 col-xl-5">
        <div class="card shadow-sm">
          <div class="card-body">
            <div class="d-flex align-items-center mb-2">
              <div class="me-2"><i class="bi bi-lightning-charge-fill text-warning"></i></div>
              <div class="flex-grow-1">
                <h5 class="mb-0">Widget</h5>
                <small class="text-muted">Plug & Play — integre em minutos</small>
              </div>
              <span class="badge bg-info-subtle text-info border">Demo</span>
            </div>
            <!-- Montagem do Mini Widget -->
            <div id="mini-widget"></div>
          </div>
        </div>
      </div>

      <!-- Lado direito: Controles e ajuda -->
      <div class="col-lg-6 col-xl-5">
        <div class="card shadow-sm">
          <div class="card-body">
            <div class="d-flex align-items-center mb-2">
              <div class="me-2"><i class="bi bi-gear text-primary"></i></div>
              <div class="flex-grow-1">
                <h5 class="mb-0">Configuração Rápida</h5>
                <small class="text-muted">Altere tema e dados básicos</small>
              </div>
            </div>

            <div class="row g-2">
              <div class="col-md-6 d-grid">
                <button id="btnThemeLight" class="btn btn-outline-secondary">
                  <i class="bi bi-sun"></i> Tema Claro
                </button>
              </div>
              <div class="col-md-6 d-grid">
                <button id="btnThemeDark" class="btn btn-dark">
                  <i class="bi bi-moon-stars"></i> Tema Escuro
                </button>
              </div>
            </div>

            <div class="alert alert-info mt-3 mb-1">
              <div class="d-flex align-items-center gap-2">
                <i class="fa fa-info-circle"></i>
                <div>
                  Para testar compras, abra a MetaMask no navegador, selecione a BSC Testnet (97) e recarregue a página se necessário.
                </div>
              </div>
            </div>

            <ul class="small text-muted mb-0">
              <li>O total a pagar é calculado automaticamente em tBNB/USDT.</li>
              <li>Exibimos "Preço" e "Disponível" conforme sua configuração.</li>
              <li>Estado de conexão aparece no topo do widget.</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Base System para componentes -->
  <script type="module" src="../../../js/shared/base-system.js"></script>

  <!-- Configuração de demonstração -->
  <script>
    // Caminho base para carregar widget.js e widget-sale.css
    window.WidgetBasePath = new URL('.', window.location.href).href;

    // Config de exemplo (BSC Testnet 97) — ajustável conforme necessidade
    window.WidgetConfig = {
      mount: '#mini-widget',
      title: 'Oferta Especial',
      ctaLabel: 'Comprar agora',
      chainId: '0x61',
      network: {
        chainName: 'BNB Smart Chain Testnet',
        nativeCurrency: { name: 'BNB', symbol: 'tBNB', decimals: 18 },
        rpcUrls: ['https://data-seed-prebsc-1-s1.binance.org:8545/'],
        blockExplorerUrls: ['https://testnet.bscscan.com']
      },
      inputMode: 'bnb',
      usdtAddress: '0x0000000000000000000000000000000000000000',
      usdtDecimals: 6,
      pricePerToken: '0.001',
      priceCurrency: 'BNB',
      availableTokensText: '1M Tokens',
      saleMethodSelector: '0x00000000',
      saleTokenSymbol: 'TOK',
      minPurchaseTokens: '10',
      maxPurchaseTokens: '1000'
    };

    // Alternância simples de tema na página (não afeta o CSS interno do widget)
    const light = () => document.body.classList.remove('bg-page-black');
    const dark  = () => document.body.classList.add('bg-page-black');
    window.addEventListener('DOMContentLoaded', () => {
      const b1 = document.getElementById('btnThemeLight');
      const b2 = document.getElementById('btnThemeDark');
      b1 && b1.addEventListener('click', light);
      b2 && b2.addEventListener('click', dark);
    });
  </script>

  <!-- Widget -->
  <script src="widget.js"></script>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>