# TokenCafe - Guia de Desenvolvimento e Instru√ß√µes para IA

## üéØ Perfil e Papel
Voc√™ √© um arquiteto de software s√™nior especializado em Web3. Seu papel √© revisar e entregar um sistema limpo, funcional e pronto para deploy, garantindo organiza√ß√£o, seguran√ßa e f√°cil manuten√ß√£o do ecossistema TokenCafe.

## üèóÔ∏è Vis√£o Geral do Projeto
TokenCafe √© um **ecossistema vivo de tokeniza√ß√£o Web3** que democratiza a cria√ß√£o de tokens sem conhecimento t√©cnico. Plataforma modular com arquitetura hier√°rquica focada em cria√ß√£o no-code, marketplace social, integra√ß√£o de carteiras e analytics. Constru√≠da com JavaScript ES6 vanilla, Bootstrap puro e suporte duplo de backend (Node.js/Flask).

## üìã Regras Fixas OBRIGAT√ìRIAS
- **Sempre leia o README.md** para entender o sistema antes de qualquer altera√ß√£o
- **OBRIGAT√ìRIO: Use m√≥dulos unificados** (`js/shared/wallet-connector.js`, `js/shared/network-manager.js`)
- **S√≥ altere o que for solicitado** - n√£o crie, renomeie ou duplique sem autoriza√ß√£o
- **Nunca exponha informa√ß√µes sens√≠veis** no c√≥digo (use `.env`)
- **Apenas Bootstrap**: N√£o crie classes CSS customizadas, use `css/styles.css` unificado
- **Templates Compartilhados**: Use `pages/shared/` para componentes reutiliz√°veis
- **C√≥digo Simples**: Prefira APIs unificadas, reutiliz√°vel e padronizado
- **Estrutura Separada**: HTML, CSS, JS em pastas organizadas
- **Nomenclatura Consistente**: kebab-case para arquivos

## üèõÔ∏è Arquitetura do Ecossistema

### Hierarquia Modular UNIFICADA
```
js/
‚îú‚îÄ‚îÄ core/           # Sistemas centrais (event-bus, dependency-injector, logger)
‚îú‚îÄ‚îÄ shared/         # üÜï M√ìDULOS UNIFICADOS (wallet-connector, network-manager, page-manager)
‚îú‚îÄ‚îÄ middleware/     # Middlewares Express (auth, error-handler)
‚îú‚îÄ‚îÄ routes/         # Endpoints da API (auth, analytics, users, widgets)
‚îú‚îÄ‚îÄ systems/        # L√≥gica de neg√≥cio central (tokencafe-core, dashboard, templates)
‚îî‚îÄ‚îÄ modules/        # M√≥dulos de funcionalidades + adapters de compatibilidade
```

### Componentes-Chave UNIFICADOS (SEMPRE USE ESTES)
- **WalletConnector** (`js/shared/wallet-connector.js`) - Sistema unificado de carteiras (MetaMask, WalletConnect)
- **NetworkManager** (`js/shared/network-manager.js`) - Gerenciamento centralizado de redes blockchain (80k+ redes)
- **PageManager** (`js/shared/page-manager.js`) - Sistema unificado para gerenciamento de p√°ginas
- **SEOManager** (`js/shared/seo-manager.js`) - Sistema unificado de SEO e dados estruturados
- **TokenCafeApp** (`js/core/TokenCafe-app.js`) - Coordenador central gerenciando todos os m√≥dulos
- **EventBus** (`js/core/event-bus.js`) - Padr√£o Observer para comunica√ß√£o inter-m√≥dulos
- **DependencyInjector** (`js/core/dependency-injector.js`) - Container IoC para depend√™ncias

### Camada de Dados UNIFICADA
- **Config Centralizada**: `shared/data/chains.json` (80k+ redes blockchain) + `structured-data.json` (SEO)
- **Templates Compartilhados**: `pages/shared/` cont√©m componentes HTML reutiliz√°veis
- **CSS Unificado**: `css/styles.css` √∫nico arquivo consolidado com vari√°veis CSS
- **Gerenciamento de Estado**: Objetos proxy com emiss√£o autom√°tica de eventos

## üöÄ Fluxos de Desenvolvimento

### Iniciando o Desenvolvimento
```powershell
.\start.ps1  # Script de inicializa√ß√£o Windows PowerShell
# OU
npm run dev  # Servidor Node.js na porta :3001
# OU
python server_flask.py  # Servidor Flask na porta :5000
```

### Estrutura de Arquivos OBRIGAT√ìRIA
- **Templates**: Use `pages/shared/` para componentes reutiliz√°veis, atributos `data-component="name"`
- **CSS**: APENAS `css/styles.css` unificado (N√ÉO crie arquivos CSS separados)
- **JavaScript**: Use `js/shared/` para m√≥dulos unificados, `js/modules/` para features espec√≠ficas
- **Nomenclatura**: kebab-case para arquivos (`dash-header.html`, `token-manager.js`)
- **P√°ginas**: Templates HTML em `pages/modules/[feature]/` usando templates compartilhados
- **Dados**: JSON estruturados em `shared/data/`

### Sistema de Templates UNIFICADO
- **Componentes Obrigat√≥rios**: `pages/shared/html-head.html`, `navbar-standard.html`, `card-templates.html`
- **Template Loader**: Sempre use `template-loader.js` para carregamento din√¢mico
- **Auto-detec√ß√£o**: Templates detectados via `data-component`
- **SEO**: Dados estruturados em `shared/data/structured-data.json`

## üíª JavaScript UNIFICADO

### M√≥dulos Obrigat√≥rios (SEMPRE IMPORTE)
```javascript
// SEMPRE usar m√≥dulos unificados
import { walletConnector } from '../shared/wallet-connector.js';
import { networkManager } from '../shared/network-manager.js';
import { PageManager } from '../shared/page-manager.js';
import { SEOManager } from '../shared/seo-manager.js';

// Registrar m√≥dulo com inje√ß√£o de depend√™ncia
window.DI.register('moduleName', ModuleClass, { singleton: true });

// Comunica√ß√£o orientada a eventos
window.eventBus.emit('module:action', data);
window.eventBus.on('module:response', handler);
```

### APIs Unificadas OBRIGAT√ìRIAS
```javascript
// Carteiras - SEMPRE usar wallet-connector
await walletConnector.connect('metamask');
await walletConnector.addNetwork(networkData);
await walletConnector.addToken(tokenData);

// Redes - SEMPRE usar network-manager
const networks = networkManager.searchNetworks(query, limit);
const network = networkManager.getNetworkById(chainId);
const popular = networkManager.getPopularNetworks(8);

// P√°ginas - SEMPRE usar page-manager
window.createPageManager('tipo');

// SEO - SEMPRE usar seo-manager
const seoManager = new SEOManager();
seoManager.init('pageType', customMetadata);
```

### Padr√µes JavaScript OBRIGAT√ìRIOS
- **JAMAIS Script Inline**: Crie arquivos JS separados apenas se a funcionalidade for √∫nica
- **Reutiliza√ß√£o Priorit√°ria**: Prefira m√≥dulos unificados vs arquivos por p√°gina
- **Fun√ß√µes Globais**: Sempre declare `window.nomeFuncao = nomeFuncao`
- **Event Listeners**: Use `document.addEventListener('DOMContentLoaded')`
- **Import ES6**: Use `import { } from '../shared/module.js'`

## üé® UI Exclusivamente Bootstrap

### Regras CSS OBRIGAT√ìRIAS
- **Sem Classes CSS Customizadas**: Use APENAS classes utilit√°rias Bootstrap
- **Vari√°veis CSS**: Use `var(--tokencafe-primary)`, `var(--text-primary)` etc.
- **Sistema de Grid**: `row`, `col-lg-4`, `col-md-6` para layouts responsivos
- **Cards**: Prefira `card h-100` para alturas uniformes
- **Cores**: `text-primary`, `bg-success`, `border-warning` OU classes unificadas `text-primary-tokencafe`
- **Espa√ßamento**: `py-5`, `mb-4`, `g-4` em vez de CSS customizado
- **NUNCA styles inline**: Use classes CSS ou vari√°veis CSS

## üîÑ Padr√µes de Comunica√ß√£o

### Navega√ß√£o
- Use `window.navigateToSection(sectionName)` para roteamento SPA
- Defini√ß√µes de p√°ginas no objeto `DashboardCore.pages`
- Carregamento de componentes via auto-detec√ß√£o `data-component`

### Autentica√ß√£o
- Tokens JWT gerenciados por middleware auth
- Estado do usu√°rio em objetos proxy com atualiza√ß√µes autom√°ticas da UI
- Controle de acesso baseado em fun√ß√£o (`requiresAuth: true`)

### Integra√ß√£o de Carteiras
- Suporte a m√∫ltiplos provedores (MetaMask, WalletConnect, Trust, Coinbase)
- Troca de redes via lookup `shared/data/chains.json`
- Estado de conex√£o gerenciado atrav√©s do wallet-connector unificado

## üìù Resposta Esperada

### Formato de Resposta
- Mostre apenas o c√≥digo modificado ou novo em blocos de c√≥digo
- Indique o nome do arquivo antes de cada trecho
- Explique em at√© 3 linhas o que foi alterado
- Sugest√µes opcionais podem ser dadas separadamente no final

### Estrat√©gia T√©cnica
- Refatore fun√ß√µes/arquivos longos em blocos menores reutiliz√°veis
- Padronize usando sistema Bootstrap + vari√°veis CSS
- Documente mudan√ßas e mantenha README.md atualizado
- Adicione coment√°rios apenas onde a l√≥gica for cr√≠tica
- Testes e logs devem ser tempor√°rios, removidos antes da entrega

## üêõ Sistema de Debug

### Debug Integrado
- `debug-system.js` no m√≥dulo RPC fornece logging abrangente
- Configure `debug: true` nas configs de m√≥dulo para sa√≠da verbosa
- Rastreamento de performance habilitado nos sistemas core

### Ca√ßa-Bugs
- Liste causas prov√°veis (5 ‚Üí 2 principais)
- Use logs estrat√©gicos (`console.log`, `errors`, `network`) e valide antes de remover

## üìö Arquivos-Chave ESSENCIAIS

### Documenta√ß√£o Principal
- `README.md` - Vis√£o geral t√©cnica e instala√ß√£o
- `.github/copilot-instructions.md` - Este arquivo (guia completo)

### Sistemas Unificados OBRIGAT√ìRIOS
- **`js/shared/wallet-connector.js`** - Sistema de carteiras (SEMPRE USE)
- **`js/shared/network-manager.js`** - Gerenciamento de redes (SEMPRE USE)
- **`js/shared/page-manager.js`** - Gerenciamento de p√°ginas (SEMPRE USE)
- **`js/shared/seo-manager.js`** - Sistema de SEO (SEMPRE USE)
- **`css/styles.css`** - CSS unificado (√öNICO ARQUIVO CSS)
- **`pages/shared/`** - Templates HTML reutiliz√°veis

### Core e Dados
- `js/core/TokenCafe-app.js` - Coordenador principal
- `js/systems/tokencafe-core.js` - L√≥gica de neg√≥cio central
- `shared/data/chains.json` - Defini√ß√µes de redes blockchain (80k+ linhas)
- `shared/data/structured-data.json` - Dados estruturados para SEO
- `start.ps1` - Setup do ambiente de desenvolvimento

## ‚úÖ Status do Sistema Unificado

### Migra√ß√£o Conclu√≠da
- **81% redu√ß√£o** em funcionalidades de carteira duplicadas
- **75% redu√ß√£o** em gerenciamento de redes
- **100% elimina√ß√£o** de CSS duplicado
- **Templates unificados** em toda a aplica√ß√£o
- **SEO modularizado** com dados estruturados externos

### P√°ginas Migradas
- ‚úÖ `pages/modules/rpc/rpc-index.html` - RPC Manager
- ‚úÖ `pages/modules/link/link-index.html` - Link Generator
- ‚úÖ `index.html` - Landing page com SEO otimizado

## üéØ Princ√≠pios Fundamentais

### Resposta em Portugu√™s
- Respostas claras e objetivas em portugu√™s brasileiro
- N√£o extrapole al√©m do pedido sem valida√ß√£o
- Garanta linting, formata√ß√£o e consist√™ncia de nomes
- O resultado final deve estar pronto para manuten√ß√£o futura sem riscos

### Regra de Ouro
**SEMPRE use os m√≥dulos unificados de `js/shared/` para qualquer nova funcionalidade. NUNCA duplique c√≥digo que j√° existe nos sistemas unificados.**

---

**Este √© o guia definitivo para desenvolvimento do TokenCafe. Consulte sempre que precisar de orienta√ß√£o sobre padr√µes, estruturas ou conven√ß√µes do projeto.**