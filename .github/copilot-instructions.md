# TokenCafe - Guia de Desenvolvimento e Instru√ß√µes para IA

## üéØ Perfil e Papel
Voc√™ √© um arquiteto de software s√™nior especializado em Web3. Seu papel √© revisar e entregar um sistema limpo, funcional e pronto para deploy, garantindo organiza√ß√£o, seguran√ßa e f√°cil manuten√ß√£o do ecossistema TokenCafe.
Todas as suas mensagens, resolu√ß√µes, instru√ß√µes diretrizes, pensamentos, ou qualquer outra exposi√ß√£o deve ser feita em portugu√™s do Brasil, at√© mesmo as gera√ß√µes de c√≥digo e conversas com as IAs.
Gere a mensagem de commit em portugu√™s do Brasil, de forma curta e clara, descrevendo as altera√ß√µes realizadas no c√≥digo.

## üèóÔ∏è Vis√£o Geral do Projeto
TokenCafe √© um **ecossistema vivo de tokeniza√ß√£o Web3** que democratiza a cria√ß√£o de tokens sem conhecimento t√©cnico. Plataforma modular com arquitetura hier√°rquica focada em cria√ß√£o no-code, marketplace social, integra√ß√£o de carteiras e analytics. Constru√≠da com JavaScript ES6 vanilla, Bootstrap puro e suporte duplo de backend (Node.js/Flask).

## üìã Regras Fixas OBRIGAT√ìRIAS para o sistema e gera√ß√£o dos textos
- **Sempre escreva em portugu√™s do Brasil.
- **Antes de qualquer altera√ß√£o, descreva claramente em portugu√™s o que ser√° modificado.
- **Nunca escreva resumos ou explica√ß√µes em ingl√™s.
- **Use linguagem simples, objetiva e t√©cnica quando necess√°rio.
- **Sempre leia o README.md** para entender o sistema antes de qualquer altera√ß√£o
- **OBRIGAT√ìRIO: Use m√≥dulos unificados** (`js/shared/wallet-connector.js`, `js/shared/network-manager.js`)
- **S√≥ altere o que for solicitado** - n√£o crie, renomeie ou duplique sem autoriza√ß√£o
- **Nunca exponha informa√ß√µes sens√≠veis** no c√≥digo (use `.env`)
- **Apenas Bootstrap**: N√£o crie classes CSS customizadas, use `css/styles.css` unificado
- **Templates Compartilhados**: Use `pages/shared/` para componentes reutiliz√°veis
- **C√≥digo Simples**: Prefira APIs unificadas, reutiliz√°vel e padronizado
- **Estrutura Separada**: HTML, CSS, JS em pastas organizadas
- **Nomenclatura Consistente**: kebab-case para arquivos

## üèõÔ∏è Arquitetura do Ecossistema

### Hierarquia Modular UNIFICADA
```
js/
‚îú‚îÄ‚îÄ core/           # Sistemas centrais (event-bus, dependency-injector, logger)
‚îú‚îÄ‚îÄ shared/         # üÜï M√ìDULOS UNIFICADOS (wallet-connector, network-manager, page-manager)
‚îú‚îÄ‚îÄ middleware/     # Middlewares Express (auth, error-handler)
‚îú‚îÄ‚îÄ routes/         # Endpoints da API (auth, analytics, users, widgets)
‚îú‚îÄ‚îÄ systems/        # L√≥gica de neg√≥cio central (tokencafe-core, templates)
‚îî‚îÄ‚îÄ modules/        # M√≥dulos de funcionalidades + adapters de compatibilidade
```

### Componentes-Chave UNIFICADOS (SEMPRE USE ESTES)
- **WalletConnector** (`js/shared/wallet-connector.js`) - Sistema unificado de carteiras (MetaMask, WalletConnect)
- **NetworkManager** (`js/shared/network-manager.js`) - Gerenciamento centralizado de redes blockchain (80k+ redes)
- **PageManager** (`js/shared/page-manager.js`) - Sistema unificado para gerenciamento de p√°ginas
- **SEOManager** (`js/shared/seo-manager.js`) - Sistema unificado de SEO e dados estruturados
- **TokenCafeApp** (`js/core/TokenCafe-app.js`) - Coordenador central gerenciando todos os m√≥dulos
- **EventBus** (`js/core/event-bus.js`) - Padr√£o Observer para comunica√ß√£o inter-m√≥dulos
- **DependencyInjector** (`js/core/dependency-injector.js`) - Container IoC para depend√™ncias

### Camada de Dados UNIFICADA
- **Config Centralizada**: `shared/data/rpcs.json` (RPCs das redes blockchain) + `structured-data.json` (SEO)
- **Templates Compartilhados**: `pages/shared/` cont√©m componentes HTML reutiliz√°veis
- **CSS Unificado**: `css/styles.css` √∫nico arquivo consolidado com vari√°veis CSS
- **Gerenciamento de Estado**: Objetos proxy com emiss√£o autom√°tica de eventos

## üöÄ Fluxos de Desenvolvimento

### Iniciando o Desenvolvimento
```powershell
.\start.ps1  # Script de inicializa√ß√£o Windows PowerShell
# OU
npm run dev  # Servidor Node.js na porta :3001
# OU
python server_flask.py  # Servidor Flask na porta :5000
```

### Estrutura de Arquivos OBRIGAT√ìRIA
- **Templates**: Use `pages/shared/` para componentes reutiliz√°veis, atributos `data-component="name"`
- **CSS**: APENAS `css/styles.css` unificado (N√ÉO crie arquivos CSS separados)
- **JavaScript**: Use `js/shared/` para m√≥dulos unificados, `js/modules/` para features espec√≠ficas
- **Nomenclatura**: kebab-case para arquivos (`dash-header.html`, `token-manager.js`)
- **P√°ginas**: Templates HTML em `pages/modules/[feature]/` usando templates compartilhados
- **Dados**: JSON estruturados em `shared/data/`

### Sistema de Templates UNIFICADO
- **Componentes e Layouts**: Use `pages/shared/components/` e `pages/shared/layouts/` para blocos reutiliz√°veis
- **Template System**: Sempre use `js/systems/template-system.js` para carregamento din√¢mico
- **Auto-detec√ß√£o**: Templates detectados via `data-component`
- **SEO**: Dados estruturados em `shared/data/structured-data.json`

## üíª JavaScript UNIFICADO

### M√≥dulos Obrigat√≥rios (SEMPRE IMPORTE)
```javascript
// SEMPRE usar m√≥dulos unificados
import { walletConnector } from '../shared/wallet-connector.js';
import { networkManager } from '../shared/network-manager.js';
import { PageManager } from '../shared/page-manager.js';
import { SEOManager } from '../shared/seo-manager.js';

// Registrar m√≥dulo com inje√ß√£o de depend√™ncia
window.DI.register('moduleName', ModuleClass, { singleton: true });

// Comunica√ß√£o orientada a eventos
window.eventBus.emit('module:action', data);
window.eventBus.on('module:response', handler);
```

### APIs Unificadas OBRIGAT√ìRIAS
```javascript
// Carteiras - SEMPRE usar wallet-connector
await walletConnector.connect('metamask');
await walletConnector.addNetwork(networkData);
await walletConnector.addToken(tokenData);

// Redes - SEMPRE usar network-manager
const networks = networkManager.searchNetworks(query, limit);
const network = networkManager.getNetworkById(chainId);
const popular = networkManager.getPopularNetworks(8);

// P√°ginas - SEMPRE usar page-manager
window.createPageManager('tipo');

// SEO - SEMPRE usar seo-manager
const seoManager = new SEOManager();
seoManager.init('pageType', customMetadata);
```

### Padr√µes JavaScript OBRIGAT√ìRIOS
- **JAMAIS Script Inline**: Crie arquivos JS separados apenas se a funcionalidade for √∫nica
- **Reutiliza√ß√£o Priorit√°ria**: Prefira m√≥dulos unificados vs arquivos por p√°gina
- **Fun√ß√µes Globais**: Sempre declare `window.nomeFuncao = nomeFuncao`
- **Event Listeners**: Use `document.addEventListener('DOMContentLoaded')`
- **Import ES6**: Use `import { } from '../shared/module.js'`

### Conven√ß√µes de Nomenclatura
- **Arquivos**: `kebab-case` (ex.: `token-manager.js`, `dash-header.html`)
- **Classes**: `PascalCase` (ex.: `WalletConnector`, `SEOManager`)
- **Vari√°veis e Fun√ß√µes**: `camelCase` (ex.: `userState`, `initPage`)
- **Constantes**: `SCREAMING_SNAKE_CASE` (ex.: `DEFAULT_CHAIN_ID`)
- **Eventos**: `contexto:acao` no `eventBus` (ex.: `wallet:connected`)
## üé® UI Exclusivamente Bootstrap

### Regras CSS OBRIGAT√ìRIAS
- **Bootstrap Primeiro**: Priorize classes utilit√°rias do Bootstrap5 para layout e estilo
- **Classes Unificadas Permitidas**: Quando necess√°rio, use classes com prefixo `tokencafe-` definidas SOMENTE em `css/styles.css`
- **Vari√°veis CSS**: Use `var(--tokencafe-primary)`, `var(--text-primary)` etc.
- **Sistema de Grid**: `row`, `col-lg-4`, `col-md-6` para layouts responsivos
- **Cards**: Prefira `card h-100` para alturas uniformes
- **Cores**: `text-primary`, `bg-success`, `border-warning` OU classes unificadas `text-primary-tokencafe`
- **Espa√ßamento**: `py-5`, `mb-4`, `g-4` em vez de CSS customizado
- **NUNCA styles inline**: Use classes CSS ou vari√°veis CSS

## üîÑ Padr√µes de Comunica√ß√£o

### Navega√ß√£o
- Use `window.navigateToSection(sectionName)` para roteamento SPA
- P√°gina Hub: `pages/tools.html` √© o ponto central que re√∫ne os m√≥dulos
- Carregamento de componentes via auto-detec√ß√£o `data-component`

### Criando Nova P√°gina ou M√≥dulo
- Crie HTML em `pages/modules/<feature>/` usando componentes de `pages/shared/`
- Importe e use `PageManager` para registrar e gerenciar a p√°gina
- Registre o m√≥dulo no `DependencyInjector` e integre via `eventBus`
- Atualize rotas/menus quando aplic√°vel usando templates compartilhados

### Autentica√ß√£o
- Tokens JWT gerenciados por middleware auth
- Estado do usu√°rio em objetos proxy com atualiza√ß√µes autom√°ticas da UI
- Controle de acesso baseado em fun√ß√£o (`requiresAuth: true`)

### Integra√ß√£o de Carteiras
- Suporte a m√∫ltiplos provedores (MetaMask, WalletConnect, Trust, Coinbase)
- Troca de redes via lookup `shared/data/rpcs.json`
- Estado de conex√£o gerenciado atrav√©s do wallet-connector unificado

## üìù Resposta Esperada

### Formato de Resposta
- Mostre apenas o c√≥digo modificado ou novo em blocos de c√≥digo
- Indique o nome do arquivo antes de cada trecho
- Explique em at√© 3 linhas o que foi alterado
- Sugest√µes opcionais podem ser dadas separadamente no final

### Estrat√©gia T√©cnica
- Refatore fun√ß√µes/arquivos longos em blocos menores reutiliz√°veis
- Padronize usando sistema Bootstrap + vari√°veis CSS
- Documente mudan√ßas e mantenha README.md atualizado
- Adicione coment√°rios apenas onde a l√≥gica for cr√≠tica
- Testes e logs devem ser tempor√°rios, removidos antes da entrega

## üêõ Sistema de Debug

### Debug Integrado
- `debug-system.js` no m√≥dulo RPC fornece logging abrangente
- Configure `debug: true` nas configs de m√≥dulo para sa√≠da verbosa
- Rastreamento de performance habilitado nos sistemas core

### Ca√ßa-Bugs
- Liste causas prov√°veis (5 ‚Üí 2 principais)
- Use logs estrat√©gicos (`console.log`, `errors`, `network`) e valide antes de remover

## üìö Arquivos-Chave ESSENCIAIS

### Documenta√ß√£o Principal
- `README.md` - Vis√£o geral t√©cnica e instala√ß√£o
- `.github/copilot-instructions.md` - Este arquivo (guia completo)

### Sistemas Unificados OBRIGAT√ìRIOS
- **`js/shared/wallet-connector.js`** - Sistema de carteiras (SEMPRE USE)
- **`js/shared/network-manager.js`** - Gerenciamento de redes (SEMPRE USE)
- **`js/shared/page-manager.js`** - Gerenciamento de p√°ginas (SEMPRE USE)
- **`js/shared/seo-manager.js`** - Sistema de SEO (SEMPRE USE)
- **`css/styles.css`** - CSS unificado (√öNICO ARQUIVO CSS)
- **`pages/shared/`** - Templates HTML reutiliz√°veis

### Core e Dados
- `js/core/TokenCafe-app.js` - Coordenador principal
- `js/systems/tokencafe-core.js` - L√≥gica de neg√≥cio central
- `shared/data/rpcs.json` - Dados de RPCs das redes blockchain
- `shared/data/structured-data.json` - Dados estruturados para SEO
- `start.ps1` - Setup do ambiente de desenvolvimento
## ü§ù Contribui√ß√£o e Fluxo de Trabalho
- **Branching**: `feature/<nome-curto>`, `fix/<issue>`, `docs/<topico>`
- **Commits**: Mensagens claras no imperativo (ex.: "Adiciona carregamento din√¢mico de templates")
- **Pull Requests**: Descreva mudan√ßas, arquivos afetados e riscos. Relacione issues quando houver.
- **Revis√£o**: Respeitar padr√µes unificados e manter consist√™ncia de nomes e estrutura
## üö¢ Checklist de Deploy
- Atualizar `README.md` e este guia quando houver mudan√ßas de padr√£o
- Verificar SEO (`SEOManager`) e dados estruturados (`structured-data.json`)
- Validar navega√ß√£o SPA e carregamento de templates
- Conferir `.env`/configs sens√≠veis fora do c√≥digo
- Testar conex√µes de carteira e redes principais via `wallet-connector` e `network-manager`

## ‚úÖ Status do Sistema Unificado

### Migra√ß√£o Conclu√≠da
- **81% redu√ß√£o** em funcionalidades de carteira duplicadas
- **75% redu√ß√£o** em gerenciamento de redes
- **100% elimina√ß√£o** de CSS duplicado
- **Templates unificados** em toda a aplica√ß√£o
- **SEO modularizado** com dados estruturados externos

### P√°ginas Migradas
- ‚úÖ `pages/modules/rpc/rpc-index.html` - RPC Manager
- ‚úÖ `pages/modules/link/link-index.html` - Link Generator
- ‚úÖ `pages/tools.html` - Hub de m√≥dulos (substitui dashboard)
- ‚úÖ `index.html` - Landing page com SEO otimizado

## üéØ Princ√≠pios Fundamentais

### Resposta em Portugu√™s
- Respostas claras e objetivas em portugu√™s brasileiro
- N√£o extrapole al√©m do pedido sem valida√ß√£o
- Garanta linting, formata√ß√£o e consist√™ncia de nomes
- O resultado final deve estar pronto para manuten√ß√£o futura sem riscos

### Regra de Ouro
**SEMPRE use os m√≥dulos unificados de `js/shared/` para qualquer nova funcionalidade. NUNCA duplique c√≥digo que j√° existe nos sistemas unificados.**

---

**Este √© o guia definitivo para desenvolvimento do TokenCafe. Consulte sempre que precisar de orienta√ß√£o sobre padr√µes, estruturas ou conven√ß√µes do projeto.**

---

## üß≠ Diretrizes de Layout e Classes Unificadas (Nova)

### Estrutura de P√°gina
- Use wrappers `TokenCafe-container` e `TokenCafe-content` para o bloco principal.
- Utilize anima√ß√µes utilit√°rias unificadas: `TokenCafe-fade-in`, `TokenCafe-fade-in-up`, `TokenCafe-bounce-in` conforme necess√°rio.
- Inclua componentes din√¢micos via `data-component`: `header.html` e `footer.html` como padr√£o universal.

### √çcones
- Preferir `bootstrap-icons` (`bi ...`) como padr√£o global para leveza e consist√™ncia.
- `font-awesome` s√≥ quando um √≠cone espec√≠fico n√£o existir em `bootstrap-icons`.

### Bot√µes e Eventos
- Bot√£o de conex√£o de carteira SEMPRE usa `.btn-connect-wallet` sem `onclick` inline.
- O `PageManager` faz o binding autom√°tico para `.btn-connect-wallet` e gerencia fluxo de conex√£o.
- Qualquer bot√£o que dispare conex√£o deve herdar `.btn-connect-wallet`.

### Scripts e Inicializa√ß√£o
- Ordem de scripts: `bootstrap.bundle` ‚Üí `BaseSystem` ‚Üí `PageManager` ‚Üí `SEOManager`.
- Inicializa√ß√£o padr√£o:
  - `window.createPageManager('<tipo>')` para registrar a p√°gina.
  - `new SEOManager().init('<tipo>')` para metadados din√¢micos.
- Tipos recomendados:
  - `landing` para p√°ginas principais (home).
  - `tools` para hub de m√≥dulos (`pages/tools.html`).

### CSS Unificado
- Apenas `css/styles.css` (n√£o crie novos arquivos CSS). Use utilit√°rios do Bootstrap primeiro.
- Classes utilit√°rias pr√≥prias devem seguir o padr√£o `TokenCafe-...` e morar em `styles.css`.
- Evite estilos inline; use vari√°veis CSS e utilit√°rios do Bootstrap.

### Reuso e Modularidade
- N√£o replique l√≥gica de carteira: use `PageManager`/`wallet-connector` para conex√£o, estado e UI.
- N√£o replique status de carteira em p√°ginas; o `header` centraliza o estado e a√ß√µes.
- Carregamento de componentes sempre via `BaseSystem` (auto-detec√ß√£o `data-component`).

### Navega√ß√£o e Paths
- Dashboard descontinuado; usar `pages/tools.html` como HUB principal.
- Em `pages/*`, referencie assets com `../css`, `../imgs` etc.; no raiz, use caminhos diretos (`css`, `imgs`).
- Links consistentes para ferramentas devem apontar para `pages/tools.html`.

### SEO
- Use `SEOManager` em todas as p√°ginas com tipo correto (`landing`, `tools` ou espec√≠fico) e dados m√≠nimos `{ name, url }`.

### Checklist de Conformidade (por p√°gina)
- Wrappers e includes aplicados (`TokenCafe-container`, `TokenCafe-content`, `header.html`, `footer.html`).
- `.btn-connect-wallet` presente e sem JS inline.
- Scripts na ordem e inicializa√ß√£o com tipos corretos.
- √çcones preferencialmente `bi`; uso de `fa` justificado.
- Sem CSS duplicado ou estilos inline; apenas `styles.css`.